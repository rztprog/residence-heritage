<% content_for :title, @flat.name + " - Résidence Héritage - Collocation étudiante" %>
<figure class='show-figure'>
  <% if @flat.main_photo.key %>
    <img src="<%= cl_image_path @flat.main_photo.key %>"  alt="photo de l'appartement">
  <% end %>
</figure>
<div class="relative font-(family-name:--inter-font) my-10 max-w-[1728px] w-full px-6 sm:px-12 lg:px-20 xl:px-24 mx-auto">
  <div class="content-show">
    <div class="content-left-show">
      <nav class="breadcrumb">
        <%= link_to "Accueil", root_path %>
        / <%= link_to "Appartements", flats_path %>
        / <%= link_to @flat.name, flat_path(@flat.id) %>
      </nav>
      <%= link_to edit_flat_path(@flat), class: "my-5 inline-block bg-orange-600 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded-lg shadow transition duration-150" do %>
        Modifier l'appartement
      <% end %>
      <h1 class='show-name'><%= @flat.name %></h1>
      <p class='show-title mb-5'><%= @flat.title %></p>
      <div class='card-description-wrapper mb-10'>
        <p><%= @flat.description %></p>
      </div>
      <h2 class='show-name'>Plongez dans les lieux</h2>
      <div class='flat-photos-grid'>
        <% @flat.photos.each do |photo| %>
          <figure class="flat-photos-photo">
            <%= link_to url_for(photo), data: { lightbox: "flat-gallery" } do %>
              <%= image_tag photo %>
            <% end %>
          </figure>
        <% end %>
      </div>
      <div class="show-photos-grid"></div>
    </div>

    <div class="content-right-show">
      <div class='price-card'>
        <p class='text-3xl'><b>€ <%= @flat.rent + @flat.charges %></b> /<span class='text-sm'> mois</span></p>
        <p class='text-sm'>Toutes charges comprises</p>
        <hr>
        <div class='price-card-line'>
          <p>Loyer / mois</p>
          <p><%= @flat.rent %>€</p>
        </div>
        <div class='price-card-line'>
          <p>Charges</p>
          <p><%= @flat.charges %>€</p>
        </div>
        <div class='mt-5 price-card-line font-bold'>
          <p>Total / mois</p>
          <p><%= @flat.rent + @flat.charges %>€</p>
        </div>
        <hr>
        <div class='price-card-line font-bold'>
          <p>Dépôt de garantie</p>
          <p><%= @flat.rent + @flat.charges %>€</p>
        </div>
        <hr>
        <div class='price-card-line font-bold'>
          <p>Éligible aux aides (APL, ALS)</p>
          <p>Oui</p>
        </div>
        <div class='price-card-line font-bold'>
          <p>Chambre disponible</p>
          <p>Oui</p>
        </div>
        <%= link_to contact_path, class: "join-button mt-5 inline-block bg-(--blue) text-white font-semibold py-4 px-4 rounded-xl shadow transition duration-150 w-full text-center" do %>
          Je veux rejoindre cette collocation   
        <% end %>
      </div>
    </div>
  </div>

  <h2 class='show-name'>Équipements</h2>
  <div class="show-equipment">
    <div class="show-part">
      <h2 class='text-xl'>🛏️ Équipements individuels</h2>
      <p class='show-description'>Dans chaque chambre</p>
      <ul class='services-list'>
        <li>✅ Lit double avec matelas haut de gamme</li>
        <li>✅ Bureau & chaise de travail confort</li>
        <li>✅ Rangement (penderie / étagères)</li>
        <li>✅ Salle de bain privative (douche, vasque, WC)</li>
        <li>✅ Accès Netflix / Prime vidéo</li>
        <li>✅ Connexion internet haut débit (RJ45 ou Wi-Fi)</li>
      </ul>
    </div>
    <div class="show-separation-vertical"></div>
    <div class="show-part">
      <h2 class='text-xl'>🛋️ Équipements communs</h2>
      <p class='show-description'>Pièce de vie & espaces partagés</p>
      <ul class='services-list'>
        <li>✅ Canapé & espace TV (Connecté)</li>
        <li>✅ Cuisine équipée (plaque, four, micro-ondes, frigo)</li>
        <li>✅ Lave-linge / sèche-linge</li>
        <li>✅ Table à manger & chaises</li>
        <li>✅ Robot aspirateur / laveur</li>
        <li>✅ Ioniseur d'air</li>
        <li>✅ Service de ménage hebdomadaire</li>
        <li>✅ Accès sécurisé & alarme connecté</li>
        <li>✅ Espaces lumineux et décorés avec soin</li>
      </ul>
    </div>
  </div>

  <h2 class='show-name'>Où se trouve l'appartement ?</h2>
  <p class='show-address'>
    <%= @flat.address %>
  </p>
  <div 
    id="map"
    data-controller="map"
    data-map-latitude="<%= @flat.latitude %>"
    data-map-longitude="<%= @flat.longitude %>"
    data-map-name="<%= @flat.name %>"
    data-map-address="<%= @flat.address %>"
    >
  </div>
</div>